<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous"
		/>
		<title>Document</title>
	</head>
	<body>
		<% console.log(data) %>
		<div class="container"></div>
		<div class="container">
			<div class="row">
				<h1>Todo List</h1>
				<strong>Todo Count: <%= data.count %></strong>
				<table class="table table-striped">
					<thead>
						<tr>
							<th scope="col"># ID</th>
							<th scope="col">Title</th>
							<th scope="col">Description</th>
							<th scope="col">Priority</th>
							<th scope="col">Is Done ?</th>
							<th scope="col">Created Date</th>
							<th scope="col">
								<a
									class="btn btn-sm btn-primary"
									href="/view/create"
									>New Todo</a
								>
							</th>
						</tr>
					</thead>
					<tbody>
						<% for (let todo of data.rows) { %>
						<tr>
							<td><%= todo.id %></td>
							<td><%= todo.title %></td>
							<td><%= todo.description %></td>
							<td><%= priority[todo.priority] %></td>
							<td><%= !todo.isDone ? 'X': 'ok' %></td>
							<td><%= todo.createdAt.toLocaleDateString() %></td>
							<td>
								<a
									class="btn btn-sm btn-secondary me-2"
									href="/view/<%= todo.id %>"
									>Read</a
								>
								<a
									class="btn btn-sm btn-success me-2"
									href="/view/update/<%= todo.id %>"
									>Update</a
								>
								<a
									class="btn btn-sm btn-success me-2"
									href="/view/delete/<%= todo.id %>"
									onclick="return confirm('Are you sure ?')"
									>Delete</a
								>
							</td>
						</tr>
						<% } %>
					</tbody>
				</table>
			</div>
		</div>
	</body>
</html>
